<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>商品名称</title>
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/style.css?v=1asdf22aiasdkjnkkaejflanvijpjoiasdfowqsf790">
    <!--<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous"> -->
    <link href="/static/fontawesome-pro-5.8.1-web/css/all.css" rel="stylesheet"> <!--load all styles -->
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
	<script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

</head>
<body>

<!-- top image -->
<div style="position: relative;">
    <img id="itemImage" src="/static/img/milk2.jpg" style="width: 100%; height: 60%; ">
    <div style="position: absolute;  top: 0; width: 100%; height: 200px; background-color: rgba(233,233,233,0.9)">
        <a onclick="goBack()" class="navbar-brand" style="float: left; margin: 3%; font-size: 80px;"> <i class="fal fa-arrow-circle-left" style="color: coral;"></i> </a>
        <a class="navbar-brand" style="float: right; margin: 3%; font-size: 80px;"> <i class="fal fa-heart-circle" style="color: coral;"></i> </a>
    </div>
    <script>
        function goBack() {
          window.history.back();
        }
    </script>

</div>

<!-- Information -->
<div class="container" style="padding: 3% 5%; background-color: white;">
    <h5 id="itemSaleAmount" class="itemSaleAmount"> 月销5000+</h5>
    <h2 id="itemPrice" class="itemPrice"></h2>
    <h2 id="itemTitle" class="itemTitle"></h2>
</div>
<script>
    var url = "/api/item/"+{{ id }};
    $.getJSON(url, function (itemdata){
        document.getElementById("itemTitle").innerText = itemdata.name;
        document.getElementById("itemPrice").innerText = "$"+itemdata.display_price;
        document.getElementById("itemImage").src = "/static/img/itemImg/"+itemdata.name+"/main.jpg";
        var i=0;
        for(i=0;i<itemdata.price_list.length;i++){
            createPriceTag(itemdata.price_list[i]);
        }
        for(i=0;i<itemdata.discription_list.length;i++){
            addDetailImg(itemdata.discription_list[i]);
        }


        function createPriceTag(data) {
            var but = document.createElement("button");
            but.className += "itemSelection";
            but.name = data.price_type;
            but.innerText = data.price_type;
            but.onclick = function selectPrice(){
                but.focus();
                var i;
                for(i=0;i<itemdata.price_list.length;i++){
                    if(itemdata.price_list[i].price_type == this.name){
                        document.getElementById("itemPrice").innerText = "$"+itemdata.price_list[i].price;
                    }
                }
            };
            document.getElementById("pricesWrap").appendChild(but);
        }

        function addDetailImg(imgName) {
            path = "/static/img/discriptions/"+ itemdata.name +"/"+imgName;

            theImg = document.createElement("img");
            theImg.className += "detailImg";
            theImg.src = path;
            document.getElementById("itemDetails").appendChild(theImg);
        }


    });


</script>

<!-- Selection -->
<div class="container" style="margin-top: 5%; background-color: white">
    <div id="pricesWrap">
    </div>
    <hr>
    <h2 class="itemSelection">服务 由澳洲制造你们的名字提供售后服务</h2>
</div>

<div class="container" style="margin-top: 5%; text-align: center">
    <p class="itemSaleAmount" style="float: none"> 宝贝详情 </p>
</div>

<!-- Details -->
<div id="itemDetails" class="container" style="margin-top: 1%; padding-bottom: 20%; background-color: white">
</div>

<!-- bottom bar -->
<nav class="navbar navbar-default navbar-fixed-bottom" style="background-color: white; " role="navigation">
    <div  style="text-align: center; float: left; width: 40%;" >
        <i onclick="toHome()" class="fal fa-home itemBottomIcon "></i>
        <i onclick="toChat()" class="fal fa-comment-dots itemBottomIcon "></i>
        <i onclick="toCart()" class="fal fa-shopping-cart itemBottomIcon "></i>
    </div>

    <div style="text-align: center; float: right; width: 60%;">
        <button class="addToCart">加入购物车</button>
        <button class="purchaseNow">  立即购买  </button>
    </div>

</nav>
<script>
    function toHome() {
            url = "/";
            window.location.assign(url);
    }

    function toChat() {
            url = "/chat";
            window.location.assign(url);
    }

    function toCart() {
            url = "/cart";
            window.location.assign(url);
    }

    function toUser() {
            url = "/user";
            window.location.assign(url);
    }
</script>



</body>
</html>